
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Default deny all reads and writes to all collections
    match /{document=**} {
      allow read, write: if false;
    }
    
    // Allow any authenticated user to read from the 'teachers' collection.
    // This is required for the application to verify a user's role upon login.
    match /teachers/{teacherId} {
      allow read: if request.auth != null;
    }

    // Allow any authenticated user to read from the 'website_content' collection.
    // This is public-facing data used throughout the marketing site.
    match /website_content/{docId} {
      allow read: if true;
    }

    // Server-side actions will bypass these rules via the Admin SDK.
    // Client-side security must be handled by portal layouts and application logic.
    // Future work should involve more granular rules per collection (e.g., students, classes).
  }
}
